<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Devising custom plot layouts • superb</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Devising custom plot layouts">
<meta property="og:description" content="superbPlot can generate either line plots, barcharts, or point plots.  However, additional layout can be programmed. In this vignette, we  show how to add custom layouts in superbPlot. As an example, we show how to implement additional layouts.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">superb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Vignette1.html">Four steps to make your plot</a>
    </li>
    <li>
      <a href="../articles/Vignette2.html">Why use difference-adjusted confidence intervals?</a>
    </li>
    <li>
      <a href="../articles/Vignette3.html">Why use correlation-adjusted confidence intervals?</a>
    </li>
    <li>
      <a href="../articles/Vignette4.html">Using a custom statistic with its error bar</a>
    </li>
    <li>
      <a href="../articles/Vignette5.html">Devising custom plot layouts</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Vignette5_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Devising custom plot layouts</h1>
            
      
      
      <div class="hidden name"><code>Vignette5.Rmd</code></div>

    </div>

    
    
<p><code>superbPlot</code> comes with six built-in layouts for plotting your data. However, it is possible to add additional, custom-made layouts. In this vignette, we present rapidly the existing layouts, then show how to supplement <code>superb</code> with your own layouts.</p>
<div id="the-built-in-plot-layouts" class="section level2">
<h2 class="hasAnchor">
<a href="#the-built-in-plot-layouts" class="anchor"></a>The built-in plot layouts</h2>
<p>When calling <code>superbPlot</code>, you use the <code>plotStyle = "layout"</code> option to indicate which layout you wish to use. Internally, <code>superbPlot</code> is calling a function whose name is <code>superbPlot."layout"</code>. For example, with <code>plotStyle = "line"</code>, the plot is actually performed by the function <code>superbPlot.line</code>.</p>
<p>The six layout available in <code>superbPlot</code> package are :</p>
<ul>
<li><p><code>superbPlot.line</code> : shows the results as points and lines,</p></li>
<li><p><code>superbPlot.point</code>: shows the results as points only,</p></li>
<li><p><code>superbPlot.bar</code> : shows the results using bars,</p></li>
<li><p><code>superbPlot.pointjitter</code>: shows the results with points, and the raw data with jittered points,</p></li>
<li><p><code>superbPlot.pointjitterviolin</code>: also shows violin plot behind the jitter points, and</p></li>
<li><p><code>superbPlot.pointindividualline</code>: show the results with fat points, and individual results with thin lines,</p></li>
</ul>
<p>To determine if a certain function is <code>superbPlot</code>-compatible, use the following function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.line"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>where you put between quote the name of a function. When devising your own, custom-made function, it is a gook thing to check that it is superbPlot-compatible.</p>
</div>
<div id="devising-a-custom-made-plot-layout" class="section level2">
<h2 class="hasAnchor">
<a href="#devising-a-custom-made-plot-layout" class="anchor"></a>Devising a custom-made plot layout</h2>
<p>The purpose of <code>superbPlot</code> is to</p>
<ul>
<li><p>compile the summary information (location of the summary statistic, upper width and lower width of the interval) and that, for each level of the factors;</p></li>
<li><p>applies all the adjustments needed in producing the summary;</p></li>
<li><p><code>superbPlot</code> also transform to discrete factors (using <code>as.factor</code>) all the factors. If some of the factors are within-subject, the information is to be found in distinct column ( remember that <code>superbPlot</code> assumes a wide-format data frame); for between-group factors, a column indicate the current group;</p></li>
<li><p>and finally, calls the plot function accepting pre-defined arguments</p></li>
</ul>
<p>In devising your own plot function, it is important that the function accept very specific arguments with very precise names.</p>
<p>Here is the header for a function corresponding to a plot style called, say, <em>foo</em> (<code>plotStyle = "foo"</code>):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">superbPlot.foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
    <span class="va">summarydata</span>,
    <span class="va">xvar</span>,       
    <span class="va">groupingfac</span>,
    <span class="va">addfactors</span>, 
    <span class="va">Debug</span>, 
    <span class="va">rawdata</span>        
    <span class="co"># any optional argument you wish</span>
<span class="op">)</span> <span class="op">{</span>
    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## ggplot instructions...        </span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>(in what follow, I assume that one factor is placed on the horizontal axis, another one is used to group the point, and up to two additional factors will results in columns and rows of panels. Of course, in devising your own template, you may use different placement.)</p>
<p>The arguments are: * <code>summarydata</code>: this data frame will contain the column <code>center</code> indicating the statistic’s value, <code>lowerwidth</code> and <code>upperwidth</code> indicating how many units below and above <code>center</code> the error bar extends. The data frame will also have columns for all the factors, and there will be as many lines as there are combinations of factors.</p>
<ul>
<li><p><code>xvar</code> is the factor to put on the horizontal axis;</p></li>
<li><p><code>groupingfac</code> is the factor used to create groups of points;</p></li>
<li><p><code>addfactors</code> are up to two additional factors to create the rows and columns of panels. <code>addfactors</code> is formatted for facetting (e.g., for factors “A” and “B”, <code>addfactors</code> would be “A~B”);</p></li>
<li><p><code>Debug</code> (a boolean) can be used when testing your code; it is set to TRUE with the <code>superbPlot</code> argument <code>Debug = TRUE</code>;</p></li>
<li><p><code>rawdata</code> : this data.frame contains the raw data with factors being transformed <code>as.factor</code> and the dependent column being renamed <code>DV</code>. When the data are in wide format, <code>rawdata</code> is reshaped to long format.</p></li>
<li><p><code>{optional arguments}</code> can be used. They must be named here; when calling <code>superbPlot</code>, any argument whose name match your optional argument will be transmitted to your custom-made function.</p></li>
</ul>
</div>
<div id="the-simplest-example" class="section level2">
<h2 class="hasAnchor">
<a href="#the-simplest-example" class="anchor"></a>The simplest example</h2>
<p>What follow is a simple example that will design a template that we will call <code>simple</code>. This layout will display the descriptive statistics and error bars. Everything will be black and white (no color instruction) and superimposed (no grouping instruction).</p>
<p>The result will be:</p>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-4-1.png" alt="Figure 1: Mean score with 95% confidence interval using the ``simple`` plot layout." width="700"><p class="caption">
Figure 1: Mean score with 95% confidence interval using the <code>simple</code> plot layout.
</p>
</div>
<p>To make this plot, we design a function <code>superbPlot.simple</code> as:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">superbPlot.simple</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
    <span class="va">summarydata</span>, <span class="va">xvar</span>, <span class="va">groupingfac</span>, <span class="va">addfactors</span>, <span class="va">Debug</span>, <span class="va">rawdata</span> 
<span class="op">)</span> <span class="op">{</span>
    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>
        data <span class="op">=</span> <span class="va">summarydata</span>, 
        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html">aes_string</a></span><span class="op">(</span> x <span class="op">=</span> <span class="va">xvar</span>, y <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span> <span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span> mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html">aes_string</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="st">"center + lowerwidth"</span>, ymax <span class="op">=</span> <span class="st">"center + upperwidth"</span><span class="op">)</span>  <span class="op">)</span><span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span> <span class="va">addfactors</span> <span class="op">)</span>
        
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>The first instruction, <code>ggplot</code> defines the source data to be <code>summarydata</code> with horizontal axis being in the string <code>xvar</code> (this is the reason that <code>mapping</code> must be given with <code>aes_string</code>). The position of the descriptive statistics will be in <code>"center"</code>.</p>
<p>The second instruction put points for each <code>"center"</code>, and the third instruction places error bars. In that case, the <code>ymin</code> and <code>ymax</code> information are contained in <code>center+lowerwidth</code> and <code>center+upperwidth</code> where <code>lowerwidth</code> and <code>upperwidth</code> are in the summarydata dataframe.</p>
<p>The last instructions generates distinct panels for each level of the remaining factors.</p>
<p>You can check that this function is <code>superbPlot</code>-compatible with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.simple"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>If <code>TRUE</code>, then we are ready to use this layout, here with the demo dataset <code>TMB1964r</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/superbPlot.html">superbPlot</a></span><span class="op">(</span><span class="va">TMB1964r</span>,
     WSFactor <span class="op">=</span> <span class="st">"T(7)"</span>,      
     BSFactor <span class="op">=</span> <span class="st">"Condition"</span>,
     variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T1"</span>,<span class="st">"T2"</span>,<span class="st">"T3"</span>,<span class="st">"T4"</span>,<span class="st">"T5"</span>,<span class="st">"T6"</span>,<span class="st">"T7"</span><span class="op">)</span>,
     plotStyle <span class="op">=</span> <span class="st">"simple"</span>, Quiet <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="optional-arguments" class="section level2">
<h2 class="hasAnchor">
<a href="#optional-arguments" class="anchor"></a>Optional arguments</h2>
<p>The above <code>simple</code> layout does not accept optional arguments. To integrate optional arguments, one method is to insert graphic directives inside the layers, e.g., inside <code>geom_point</code>.</p>
<p>A convenient method is with <code>do.call</code> and <code>modifyList</code>, for example</p>
<p>A full example it therefore</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">superbPlot.simpleWithOptions</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
    <span class="va">summarydata</span>, <span class="va">xvar</span>, <span class="va">groupingfac</span>, <span class="va">addfactors</span>, <span class="va">Debug</span>, <span class="va">rawdata</span>,
    <span class="va">myownParams</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>  <span class="co">## add the optional arguments to the function</span>
<span class="op">)</span> <span class="op">{</span>
    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>
        data <span class="op">=</span> <span class="va">summarydata</span>, 
        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html">aes_string</a></span><span class="op">(</span> x <span class="op">=</span> <span class="va">xvar</span>, y <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span> <span class="va">geom_point</span>, <span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html">modifyList</a></span><span class="op">(</span>
       <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span> color <span class="op">=</span><span class="st">"black"</span> <span class="op">)</span>,
        <span class="va">myownParams</span>
    <span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span> mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html">aes_string</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="st">"center + lowerwidth"</span>, ymax <span class="op">=</span> <span class="st">"center + upperwidth"</span><span class="op">)</span>  <span class="op">)</span><span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span> <span class="va">addfactors</span> <span class="op">)</span>
        
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.simpleWithOptions"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/superbPlot.html">superbPlot</a></span><span class="op">(</span><span class="va">TMB1964r</span>,
    WSFactor <span class="op">=</span> <span class="st">"T(7)"</span>,      
    BSFactor <span class="op">=</span> <span class="st">"Condition"</span>,
    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T1"</span>,<span class="st">"T2"</span>,<span class="st">"T3"</span>,<span class="st">"T4"</span>,<span class="st">"T5"</span>,<span class="st">"T6"</span>,<span class="st">"T7"</span><span class="op">)</span>,
    plotStyle <span class="op">=</span> <span class="st">"simpleWithOptions"</span>, Quiet <span class="op">=</span> <span class="cn">TRUE</span>,
    myownParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span>, color<span class="op">=</span><span class="st">"red"</span><span class="op">)</span> <span class="co">## here goes the optional arguments</span>
<span class="op">)</span></code></pre></div>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-10-1.png" alt="Figure 2: A simple figure with optional arguments" width="700"><p class="caption">
Figure 2: A simple figure with optional arguments
</p>
</div>
</div>
<div id="getting-debug-information" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-debug-information" class="anchor"></a>Getting Debug information</h2>
<p>It is sometimes useful to extract variables out of the function when debugging the code. A useful function is to use <code>runDebug</code>. This function (shipped with <code>suberb</code>) will display text and transfer any variables you want into the global environment.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/runDebug.html">runDebug</a></span><span class="op">(</span> <span class="va">Debug</span>, <span class="st">"Text to show"</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"variable1"</span>, <span class="st">"variable2"</span>, <span class="st">"etc"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span> <span class="va">var1InTheFct</span>, <span class="va">var2InTheFct</span>, <span class="va">varetcInTheFct</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>For example, the following will get the dataframes:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">superbPlot.empty</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
    <span class="va">summarydata</span>, <span class="va">xvar</span>, <span class="va">groupingfac</span>, <span class="va">addfactors</span>, <span class="va">Debug</span>, <span class="va">rawdata</span> 
<span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="../reference/runDebug.html">runDebug</a></span><span class="op">(</span> <span class="va">Debug</span>, <span class="st">"Getting the dataframes"</span>,
        <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"summary"</span>,<span class="st">"raw"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">summarydata</span>, <span class="va">rawdata</span><span class="op">)</span><span class="op">)</span>

    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># an empty plot        </span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="../reference/superbPlot.html">superbPlot</a></span><span class="op">(</span><span class="va">TMB1964r</span>,
     WSFactor <span class="op">=</span> <span class="st">"T(7)"</span>,      
     BSFactor <span class="op">=</span> <span class="st">"Condition"</span>,
     variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T1"</span>,<span class="st">"T2"</span>,<span class="st">"T3"</span>,<span class="st">"T4"</span>,<span class="st">"T5"</span>,<span class="st">"T6"</span>,<span class="st">"T7"</span><span class="op">)</span>,
     plotStyle <span class="op">=</span> <span class="st">"empty"</span>, Quiet <span class="op">=</span> <span class="cn">TRUE</span>, Debug <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">## turn on Debug</span>
<span class="op">)</span></code></pre></div>
<p>(I inhibited the output, but you will get pages of debug information) Browsing the information displayed, you will see at the end <code>Getting the dataframes</code> followed by <code>summary</code> and <code>raw</code>. These two variables are not in the global environment and you can manipulate them. You can also use them in plotting functions, for example</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">superbPlot.simple</span><span class="op">(</span><span class="va">summary</span>, <span class="st">"T"</span>, <span class="st">"Condition"</span>, <span class="st">".~."</span>, <span class="cn">FALSE</span>, <span class="va">raw</span><span class="op">)</span></code></pre></div>
</div>
<div id="an-example" class="section level2">
<h2 class="hasAnchor">
<a href="#an-example" class="anchor"></a>An example</h2>
<p>In what follow, we create a toy example where the raw data will be shown with smileys. Note that this example may not work in Rstudio (see “limitation” on emojifont <a href="https://CRAN.R-project.org/package=emojifont">page</a> )</p>
<p>We first need the <code>emojifont</code> library</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("emojifont")</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://guangchuangyu.github.io/emojifont">emojifont</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: package 'emojifont' was built under R version 4.0.4</code></pre>
<p>Then we define a <code>"smiley"</code> layout where the emojis are shown with <code>geom_text</code> layer:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">superbPlot.smiley</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
    <span class="va">summarydata</span>, <span class="va">xvar</span>, <span class="va">groupingfac</span>, <span class="va">addfactors</span>, <span class="va">Debug</span>, <span class="va">rawdata</span> 
<span class="op">)</span> <span class="op">{</span>
    <span class="co"># the early part bears on summary data with variable "center"</span>
    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>
        data <span class="op">=</span> <span class="va">summarydata</span>, 
        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html">aes_string</a></span><span class="op">(</span>
            x <span class="op">=</span> <span class="va">xvar</span>, y <span class="op">=</span> <span class="st">"center"</span>, 
            fill <span class="op">=</span> <span class="va">groupingfac</span>, 
            shape <span class="op">=</span> <span class="va">groupingfac</span>, 
            colour <span class="op">=</span> <span class="va">groupingfac</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">.95</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span> width <span class="op">=</span> <span class="fl">.6</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span><span class="fl">.95</span><span class="op">)</span>, 
              mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html">aes_string</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="st">"center + lowerwidth"</span>, ymax <span class="op">=</span> <span class="st">"center + upperwidth"</span><span class="op">)</span> 
    <span class="op">)</span><span class="op">+</span> 
    <span class="co"># this part bears on the rawdata only with variable "DV"</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">rawdata</span>, 
              position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html">position_jitter</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span>,
              family<span class="op">=</span><span class="st">"EmojiOne"</span>, label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/emojifont/man/emoji.html">emoji</a></span><span class="op">(</span><span class="st">"smile"</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">3</span>, 
              mapping<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html">aes_string</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">xvar</span>, y<span class="op">=</span><span class="st">"DV"</span>, group <span class="op">=</span> <span class="va">groupingfac</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span> <span class="va">addfactors</span> <span class="op">)</span>
        
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We check that it is a <code>superbPlot</code>-compatible function:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.smiley"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>It is all we need! It can be inserted in a <code>superbPlot</code> call:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/superbPlot.html">superbPlot</a></span><span class="op">(</span><span class="va">TMB1964r</span>,
     WSFactor <span class="op">=</span> <span class="st">"T(7)"</span>,      
     BSFactor <span class="op">=</span> <span class="st">"Condition"</span>, 
     variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T1"</span>,<span class="st">"T2"</span>,<span class="st">"T3"</span>,<span class="st">"T4"</span>,<span class="st">"T5"</span>,<span class="st">"T6"</span>,<span class="st">"T7"</span><span class="op">)</span>,
     plotStyle <span class="op">=</span> <span class="st">"smiley"</span>, Quiet <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p><img src="Vignette5_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Denis Cousineau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
