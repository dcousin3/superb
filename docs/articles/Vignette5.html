<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using a custom plot layout within ``superb`` • superb</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using a custom plot layout within ``superb``">
<meta property="og:description" content="superbPlot can generate either line plots, barcharts, or point plots.  However, additional layout can be programmed. In this vignette, we  show how to add custom layouts in superbPlot. As an example, we show how to implement additional layouts.
">
<meta property="og:image" content="http://dcousin3.github.io/superb/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">superb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.95.18</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Vignette1.html">Three steps to make your plot</a>
    </li>
    <li>
      <a href="../articles/Vignette2.html">Why use difference-adjusted confidence intervals?</a>
    </li>
    <li>
      <a href="../articles/Vignette3.html">Why use correlation-adjusted confidence intervals?</a>
    </li>
    <li>
      <a href="../articles/Vignette9.html">Plotting Cohen's d with ``superb``</a>
    </li>
    <li>
      <a href="../articles/VignetteC.html">Plotting proportions with ``superb``</a>
    </li>
    <li>
      <a href="../articles/VignetteF.html">Plotting frequencies using ``superb``</a>
    </li>
    <li>
      <a href="../articles/VignetteA.html">Plotting Reference Intervals with ``superb``</a>
    </li>
    <li>
      <a href="../articles/TheMakingOf.html">The making-of the figures in the article</a>
    </li>
    <li>
      <a href="../articles/CustomizingSuperbPlots.html">Customizing `superb` plots</a>
    </li>
    <li>
      <a href="../articles/VignetteE.html">Adding labels to ``superb`` plots</a>
    </li>
    <li>
      <a href="../articles/Vignette7.html">Unequal variances, Welch test, Tryon adjustment, and ``superb``</a>
    </li>
    <li>
      <a href="../articles/Vignette8.html">(advanced) Alternate ways to decorrelate repeated measures from transformations</a>
    </li>
    <li>
      <a href="../articles/VignetteG.html">(advanced) Local decorrelation for time series</a>
    </li>
    <li>
      <a href="../articles/VignetteB.html">(advanced) Non-factorial within-subject designs in ``superb``</a>
    </li>
    <li>
      <a href="../articles/Vignette4.html">Using a custom statistic with its error bar within ``superb``</a>
    </li>
    <li>
      <a href="../articles/Vignette5.html">Using a custom plot layout within ``superb``</a>
    </li>
    <li>
      <a href="../articles/VignetteD.html">``superb`` and SPSS</a>
    </li>
    <li>
      <a href="../articles/Vignette6.html">Generating ready-to-analyze datasets with GRD</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dcousin3/superb/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using a custom plot layout within
<code>superb</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dcousin3/superb/blob/HEAD/../vignettes/Vignette5.Rmd" class="external-link"><code>../vignettes/Vignette5.Rmd</code></a></small>
      <div class="hidden name"><code>Vignette5.Rmd</code></div>

    </div>

    
    
<p><code><a href="../reference/superbPlot.html">superbPlot()</a></code> comes with seven built-in layouts for
plotting your data. However, it is possible to add additional,
custom-made layouts. In this vignette, we present rapidly the existing
layouts, then show how to supplement <code>superb</code> with your own
layouts.</p>
<div class="section level3">
<h3 id="the-built-in-plot-layouts">The built-in plot layouts<a class="anchor" aria-label="anchor" href="#the-built-in-plot-layouts"></a>
</h3>
<p>When calling <code><a href="../reference/superbPlot.html">superbPlot()</a></code>, you use the
<code>plotStyle = "layout"</code> option to indicate which layout you
wish to use. Internally, <code><a href="../reference/superbPlot.html">superbPlot()</a></code> is calling a function
whose name is <code>superbPlot."layout"()</code>. For example, with
<code>plotStyle = "line"</code>, the plot is actually performed by the
function <code><a href="../reference/superbPlot.line.html">superbPlot.line()</a></code>.</p>
<p>The seven layout available in <code>superbPlot</code> package are
:</p>
<ul>
<li><p><code><a href="../reference/superbPlot.line.html">superbPlot.line()</a></code> : shows the results as points and
lines,</p></li>
<li><p><code><a href="../reference/superbPlot.lineBand.html">superbPlot.lineBand()</a></code>: Shows the confidence
intervals as a semi-transparent band rather than with bars.</p></li>
<li><p><code><a href="../reference/superbPlot.point.html">superbPlot.point()</a></code>: shows the results as points
only,</p></li>
<li><p><code><a href="../reference/superbPlot.bar.html">superbPlot.bar()</a></code> : shows the results using
bars,</p></li>
<li><p><code><a href="../reference/superbPlot.pointjitter.html">superbPlot.pointjitter()</a></code>: shows the results with
points, and the raw data with jittered points,</p></li>
<li><p><code><a href="../reference/superbPlot.pointjitterviolin.html">superbPlot.pointjitterviolin()</a></code>: also shows violin
plot behind the jitter points, and</p></li>
<li><p><code><a href="../reference/superbPlot.pointindividualline.html">superbPlot.pointindividualline()</a></code>: show the results
with fat points, and individual results with thin lines,</p></li>
<li><p><code><a href="../reference/superbPlot.raincloud.html">superbPlot.raincloud()</a></code>: Shows the results with
distribution and jitter.</p></li>
</ul>
<p>To determine if a certain function is
<code>superbPlot</code>-compatible, use the following function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.line"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>where you put between quote the name of a function. When devising
your own, custom-made function, it is a good thing to check that it is
<code>superbPlot</code>-compatible.</p>
</div>
<div class="section level3">
<h3 id="illustrating-some-of-the-built-in-layouts">Illustrating some of the built-in layouts<a class="anchor" aria-label="anchor" href="#illustrating-some-of-the-built-in-layouts"></a>
</h3>
<p>To get a sense of the currently available layouts, we first generate
a dataset composed of randomly generated scores mimicking a 3 <span class="math inline">\(\times\)</span> 2 design with three degrees of
Difficulties (as a between-group factor) and two days of testing (as a
within-subject factor). It is believed (and simulated) that all two
factors have main effets on the scores.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/GRD.html">GRD</a></span><span class="op">(</span></span>
<span>    RenameDV   <span class="op">=</span> <span class="st">"score"</span>, </span>
<span>    SubjectsPerGroup <span class="op">=</span> <span class="fl">25</span>, </span>
<span>    BSFactors  <span class="op">=</span> <span class="st">"Difficulty(3)"</span>, </span>
<span>    WSFactors  <span class="op">=</span> <span class="st">"Day(day1, day2)"</span>,</span>
<span>    Population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">65</span>,stddev <span class="op">=</span> <span class="fl">12</span>,rho <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    Effects    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Day"</span> <span class="op">=</span> <span class="fu"><a href="../reference/slope.html">slope</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span><span class="op">)</span>, <span class="st">"Difficulty"</span> <span class="op">=</span> <span class="fu"><a href="../reference/slope.html">slope</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">testdata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id Difficulty score.day1 score.day2</span></span>
<span><span class="co">## 1  1          1   62.63134   39.76480</span></span>
<span><span class="co">## 2  2          1   60.43511   40.73306</span></span>
<span><span class="co">## 3  3          1   51.85251   44.06271</span></span>
<span><span class="co">## 4  4          1   65.04533   34.18791</span></span>
<span><span class="co">## 5  5          1   66.02468   63.97273</span></span>
<span><span class="co">## 6  6          1   87.54730   51.35895</span></span></code></pre>
<p>For simplicity, we define a function whose arguments are the dataset
and the layout:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">style</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/superb.html">superb</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">score.day1</span>, <span class="va">score.day2</span><span class="op">)</span> <span class="op">~</span> <span class="va">Difficulty</span>,</span>
<span>        <span class="va">data</span>,</span>
<span>        WSFactors <span class="op">=</span> <span class="st">"Day(2)"</span>,</span>
<span>        adjustments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>purpose<span class="op">=</span><span class="st">"difference"</span>, decorrelation<span class="op">=</span><span class="st">"CA"</span><span class="op">)</span>,</span>
<span>        plotStyle <span class="op">=</span> <span class="va">style</span>,</span>
<span>        <span class="va">...</span></span>
<span>    <span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Layout is ''"</span>,<span class="va">style</span>,<span class="st">"''"</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Lets compute the plots will the first six built-in layouts and show
them</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"bar"</span><span class="op">)</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"point"</span><span class="op">)</span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"line"</span><span class="op">)</span></span>
<span><span class="va">p4</span> <span class="op">&lt;-</span> <span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"pointjitter"</span> <span class="op">)</span></span>
<span><span class="va">p5</span> <span class="op">&lt;-</span> <span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"pointjitterviolin"</span><span class="op">)</span></span>
<span><span class="va">p6</span> <span class="op">&lt;-</span> <span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"pointindividualline"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'gridExtra' was built under R version 4.3.3</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">p1</span>,<span class="va">p2</span>,<span class="va">p3</span>,<span class="va">p4</span>,<span class="va">p5</span>,<span class="va">p6</span>,ncol<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-5-1.png" alt="**Figure 1a**. Look of the six built-in layouts on the same random dataset" width="672"><p class="caption">
<strong>Figure 1a</strong>. Look of the six built-in layouts on the same
random dataset
</p>
</div>
<p>A cool format, a <code>raincloud</code> plot <span class="citation">(Allen et al., 2021)</span>, is better seen with
coordinates flipped over:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"raincloud"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-6-1.png" alt="**Figure 1b**. The seventh layout, the raincloud" width="672"><p class="caption">
<strong>Figure 1b</strong>. The seventh layout, the raincloud
</p>
</div>
<p>Finally, the following shows the latest layout, a box plot, better
for showing median and confidence interval of the median, obtained
with</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mp</span><span class="op">(</span><span class="va">testdata</span>, <span class="st">"boxplot"</span>, statistic <span class="op">=</span> <span class="st">"median"</span>, pointParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"orange"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-7-1.png" alt="**Figure 1c**. Box plot of the data" width="480"><p class="caption">
<strong>Figure 1c</strong>. Box plot of the data
</p>
</div>
<p>For more controls, you can manually set the colors, the fills and/or
the shapes, as done here in a list:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ornate</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_colour_manual</a></span><span class="op">(</span> name <span class="op">=</span> <span class="st">"Difference"</span>, </span>
<span>        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Easy"</span>, <span class="st">"Hard"</span>, <span class="st">"Unthinkable"</span><span class="op">)</span>, </span>
<span>        values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"black"</span>, <span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> ,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span> name <span class="op">=</span> <span class="st">"Difference"</span>, </span>
<span>        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Easy"</span>, <span class="st">"Hard"</span>, <span class="st">"Unthinkable"</span><span class="op">)</span>, </span>
<span>        values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"black"</span>, <span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> ,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_shape_manual</a></span><span class="op">(</span> name <span class="op">=</span> <span class="st">"Difference"</span>, </span>
<span>        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Easy"</span>, <span class="st">"Hard"</span>, <span class="st">"Unthinkable"</span><span class="op">)</span> ,</span>
<span>        values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span> ,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span> ,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Days of test"</span>, y <span class="op">=</span> <span class="st">"Score in points"</span> <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span> <span class="op">=</span> <span class="st">"Former day"</span>, <span class="st">"2"</span> <span class="op">=</span> <span class="st">"Latter day"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span></span>
<span>    <span class="va">p1</span><span class="op">+</span><span class="va">ornate</span>, <span class="va">p2</span><span class="op">+</span><span class="va">ornate</span>, <span class="va">p3</span><span class="op">+</span><span class="va">ornate</span>,</span>
<span>    <span class="va">p4</span><span class="op">+</span><span class="va">ornate</span>, <span class="va">p5</span><span class="op">+</span><span class="va">ornate</span>, <span class="va">p6</span><span class="op">+</span><span class="va">ornate</span>,</span>
<span>    ncol<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-8-1.png" alt="**Figure 2a**. The six built-in template with ornamental styling added." width="672"><p class="caption">
<strong>Figure 2a</strong>. The six built-in template with ornamental
styling added.
</p>
</div>
<p>These are just a few examples. However, if these layouts do not fit
yours needs, it is possible to devise a custom-made layout and inform
<code>superbPlot</code> to use it. To that end, see the instructions
below.</p>
</div>
<div class="section level3">
<h3 id="devising-a-custom-made-plot-layout">Devising a custom-made plot layout<a class="anchor" aria-label="anchor" href="#devising-a-custom-made-plot-layout"></a>
</h3>
<p>In a nutshell, the purpose of <code><a href="../reference/superbPlot.html">superbPlot()</a></code> is to</p>
<ul>
<li><p>compile the summary information (location of the summary
statistic, upper width and lower width of the interval) and that, for
each level of the factors;</p></li>
<li><p>applies all the adjustments needed in producing the
summary;</p></li>
<li><p>and finally, calls a plot function accepting pre-defined
arguments</p></li>
</ul>
<p>In devising your own plot function, it is important that (i) the
function name begins with <code>superbPlot.</code>; (ii) the function
accept very specific arguments with very precise names.</p>
<p>Here is the header for a function corresponding to a plot style
called, say, <em>foo</em> (<code>plotStyle = "foo"</code>):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superbPlot.foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">summarydata</span>,</span>
<span>    <span class="va">xfactor</span>,       </span>
<span>    <span class="va">groupingfactor</span>,</span>
<span>    <span class="va">addfactors</span>, </span>
<span>    <span class="va">rawdata</span>        </span>
<span>    <span class="co"># any optional argument you wish</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## ggplot instructions...        </span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>In what follow, it is assumed that one factor is placed on the
horizontal axis (<code>xfactor</code>), another one is used to group the
point (<code>groupingfactor</code>), and up to two additional factors
will results in columns and rows of panels (<code>addfactors</code>; of
course, in devising your own template, you may use different placement).
<code><a href="../reference/superbPlot.html">superbPlot()</a></code> is restricted to a maximum of four
factors.</p>
<p>The arguments are:</p>
<ul>
<li><p><code>summarydata</code>: this data frame will contain the column
<code>center</code> indicating the statistic’s value,
<code>lowerwidth</code> and <code>upperwidth</code> indicating how many
units below and above <code>center</code> the error bar extends. The
data frame will also have columns for all the factors, and there will be
as many lines as there are combinations of factors.</p></li>
<li><p><code>xfactor</code> is the factor to put on the horizontal
axis;</p></li>
<li><p><code>groupingfactor</code> is the factor used to create groups
of points;</p></li>
<li><p><code>addfactors</code> are up to two additional factors to
create the rows and columns of panels. <code>addfactors</code> is
formatted for facetting (e.g., for factors “A” and “B”,
<code>addfactors</code> would be “A~B”);</p></li>
<li><p><code>rawdata</code> : this data.frame contains the raw data with
factors being transformed <code>as.factor</code> and the dependent
column being renamed <code>DV</code>. When the data are in wide format,
<code>rawdata</code> is reshaped to long format.</p></li>
<li><p><code>{optional arguments}</code> can be used. They must be named
here; when calling <code><a href="../reference/superbPlot.html">superbPlot()</a></code>, any argument whose name
match your optional argument will be transmitted to your custom-made
function.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="the-simplest-example">The simplest example<a class="anchor" aria-label="anchor" href="#the-simplest-example"></a>
</h3>
<p>What follow is a simple example that will design a template that we
will call <code>simple</code>. This layout will display the descriptive
statistics and error bars. Everything will be black and white (no color
instruction) and superimposed (no grouping instruction).</p>
<p>The result will be:</p>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-10-1.png" alt="**Figure 3**. Mean score with 95% confidence interval using the ``simple`` plot layout." width="384"><p class="caption">
<strong>Figure 3</strong>. Mean score with 95% confidence interval using
the <code>simple</code> plot layout.
</p>
</div>
<p>To make this plot, we design a function
<code>superbPlot.simple</code> as:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superbPlot.simple</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">summarydata</span>, <span class="va">xfactor</span>, <span class="va">groupingfactor</span>, <span class="va">addfactors</span>, <span class="va">rawdata</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">summarydata</span>, </span>
<span>        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span> x <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">xfactor</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">center</span>, group <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">groupingfactor</span><span class="op">)</span> <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>  <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span> mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">center</span> <span class="op">+</span> <span class="va">lowerwidth</span>, </span>
<span>                                 ymax <span class="op">=</span> <span class="va">center</span> <span class="op">+</span> <span class="va">upperwidth</span><span class="op">)</span>  <span class="op">)</span><span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span> <span class="va">addfactors</span> <span class="op">)</span></span>
<span>        </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The first instruction, <code>ggplot</code> defines the source data to
be <code>summarydata</code> with horizontal axis being in the string
<code>xfactor</code> (the piece of instructions <code>!!sym( )</code>
converts the string into a variable). The position of the descriptive
statistics is automatically computed and stored in a column called
<code>center</code>.</p>
<p>The second instruction put points for each <code>center</code>, and
the third instruction places error bars. In that case, the
<code>ymin</code> and <code>ymax</code> information are contained in
<code>center+lowerwidth</code> and <code>center+upperwidth</code> where
<code>lowerwidth</code> and <code>upperwidth</code> are automaticall
computed and stored in the <code>summarydata</code> dataframe.</p>
<p>The last instructions generates distinct panels for each level of the
remaining factors.</p>
<p>You can check that this function is
<code>superbPlot</code>-compatible with:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.simple"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>If <code>TRUE</code>, then we are ready to use this layout, here with
the demo dataset <code>TMB1964r</code> whose result was shown above in
Figure 3:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/superb.html">superb</a></span><span class="op">(</span></span>
<span>    <span class="fu">crange</span><span class="op">(</span><span class="va">T1</span>,<span class="va">T7</span><span class="op">)</span> <span class="op">~</span> <span class="va">Condition</span>,</span>
<span>    <span class="va">TMB1964r</span>,</span>
<span>    WSFactors <span class="op">=</span> <span class="st">"T(7)"</span>,      </span>
<span>    plotStyle <span class="op">=</span> <span class="st">"simple"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="optional-arguments">Optional arguments<a class="anchor" aria-label="anchor" href="#optional-arguments"></a>
</h3>
<p>The above <code>simple</code> layout does not accept optional
arguments. To integrate optional arguments, one method is to insert
graphic directives inside the layers, e.g., inside
<code>geom_point</code>.</p>
<p>A convenient method is with <code>do.call</code> and
<code>modifyList</code>, for example:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span> <span class="va">geom_point</span>, <span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> size<span class="op">=</span> <span class="fl">3</span> <span class="co">##etc., the default directives##</span></span>
<span>   <span class="op">)</span>, <span class="va">myownParams</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>A full example it therefore</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superbPlot.simpleWithOptions</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">summarydata</span>, <span class="va">xfactor</span>, <span class="va">groupingfactor</span>, <span class="va">addfactors</span>, <span class="va">rawdata</span>,</span>
<span>    <span class="va">myownpointParams</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,  <span class="co">## will be used to add the optional arguments to the function</span></span>
<span>    <span class="va">myownebParams</span>    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>  <span class="co">## will be used to add the optional arguments to the function</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="va">summarydata</span>, </span>
<span>        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span> x <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">xfactor</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">center</span>, group<span class="op">=</span><span class="va">Condition</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span> <span class="va">geom_point</span>, <span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> color <span class="op">=</span><span class="st">"black"</span> <span class="op">)</span>,</span>
<span>        <span class="va">myownpointParams</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span> <span class="va">geom_errorbar</span>, <span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">center</span> <span class="op">+</span> <span class="va">lowerwidth</span>, </span>
<span>                            ymax <span class="op">=</span> <span class="va">center</span> <span class="op">+</span> <span class="va">upperwidth</span><span class="op">)</span>  <span class="op">)</span>,</span>
<span>        <span class="va">myownebParams</span> </span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span> <span class="va">addfactors</span> <span class="op">)</span></span>
<span>        </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.simpleWithOptions"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/superb.html">superb</a></span><span class="op">(</span></span>
<span>    <span class="fu">crange</span><span class="op">(</span><span class="va">T1</span>,<span class="va">T7</span><span class="op">)</span> <span class="op">~</span> <span class="va">Condition</span>,</span>
<span>    <span class="va">TMB1964r</span>,</span>
<span>    WSFactors <span class="op">=</span> <span class="st">"T(7)"</span>,      </span>
<span>    plotStyle <span class="op">=</span> <span class="st">"simpleWithOptions"</span>, </span>
<span>    <span class="co">## here goes the optional arguments</span></span>
<span>    myownpointParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">1</span>, color<span class="op">=</span><span class="st">"purple"</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">)</span>, </span>
<span>    myownebParams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>linewidth<span class="op">=</span><span class="fl">1</span>, color<span class="op">=</span><span class="st">"purple"</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">)</span> </span>
<span><span class="op">)</span></span></code></pre></div>
<p>In that example, the same parameters are sent to
<code>geom_point</code> and to <code>geom_errorbar</code>. It is left as
an exercice to the reader to use two distinct sets of optional
parameters, one for the points, the other for the error bars.</p>
</div>
<div class="section level3">
<h3 id="getting-feedback-information">Getting feedback information<a class="anchor" aria-label="anchor" href="#getting-feedback-information"></a>
</h3>
<p>It is sometimes useful to extract variables out of the function when
debugging the code. A useful function is to use <code><a href="../reference/runDebug.html">runDebug()</a></code>.
This function (shipped with <code>suberb</code>) will display text and
transfer any variables you want into the global environment.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>superb.feedback <span class="op">=</span> <span class="st">'all'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/runDebug.html">runDebug</a></span><span class="op">(</span> <span class="st">'where are we?'</span>, <span class="st">"Text to show when we get there"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"variable1"</span>, <span class="st">"variable2"</span>, <span class="st">"etc"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="st">"var1InTheFct"</span>, <span class="st">"var2InTheFct"</span>, <span class="st">"varetcInTheFct"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ==&gt; Text to show when we get there &lt;==</span></span>
<span><span class="co">##     variables dumped in: variable1, variable2, etc</span></span></code></pre>
<p>For example, the following will get the dataframes:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superbPlot.empty</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">summarydata</span>, <span class="va">xfactor</span>, <span class="va">groupingfactor</span>, <span class="va">addfactors</span>, <span class="va">rawdata</span> </span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/runDebug.html">runDebug</a></span><span class="op">(</span> <span class="st">'inempty'</span>, <span class="st">"Dumping the two dataframes"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"summary"</span>,<span class="st">"raw"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">summarydata</span>, <span class="va">rawdata</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># an empty plot        </span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>superb.feedback <span class="op">=</span> <span class="st">'inempty'</span><span class="op">)</span>  <span class="co">## turn on feedback when reaching 'inempty'</span></span>
<span><span class="fu"><a href="../reference/superb.html">superb</a></span><span class="op">(</span></span>
<span>    <span class="fu">crange</span><span class="op">(</span><span class="va">T1</span>,<span class="va">T7</span><span class="op">)</span> <span class="op">~</span> <span class="va">Condition</span>,</span>
<span>    <span class="va">TMB1964r</span>,</span>
<span>    WSFactors <span class="op">=</span> <span class="st">"T(7)"</span>,      </span>
<span>    plotStyle <span class="op">=</span> <span class="st">"empty"</span> </span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ==&gt; Dumping the two dataframes &lt;==</span></span>
<span><span class="co">##     variables dumped in: summary, raw</span></span></code></pre>
<p>You see <code>Dumping the two dataframes</code> followed by
<code>summary</code> and <code>raw</code>. These two variables are now
in the global environment and you can manipulate them. You can also use
them in testing your plotting functions, for example</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">superbPlot.simple</span><span class="op">(</span><span class="va">summary</span>, <span class="st">"T"</span>, <span class="st">"Condition"</span>, <span class="st">".~."</span>, <span class="va">raw</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="an-example">An example<a class="anchor" aria-label="anchor" href="#an-example"></a>
</h3>
<p>In what follow, we create a toy example where the raw data will be
shown with smileys. Note that this example may not work in Rstudio (see
“limitation” on emojifont <a href="https://CRAN.R-project.org/package=emojifont" class="external-link">page</a> )</p>
<p>We first need the <code>emojifont</code> library</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("emojifont")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/GuangchuangYu/emojifont" class="external-link">emojifont</a></span><span class="op">)</span></span></code></pre></div>
<p>Then we define a <code>"smiley"</code> layout where the emojis are
shown with <code>geom_text</code> layer:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">superbPlot.smiley</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span> <span class="va">summarydata</span>, <span class="va">xfactor</span>, <span class="va">groupingfactor</span>, <span class="va">addfactors</span>, <span class="va">rawdata</span> <span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># the early part bears on summary data with variable "center"</span></span>
<span>    <span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>        data    <span class="op">=</span> <span class="va">summarydata</span>, </span>
<span>        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>            x      <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">xfactor</span><span class="op">)</span>, </span>
<span>            y      <span class="op">=</span> <span class="va">center</span>, </span>
<span>            fill   <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">groupingfactor</span><span class="op">)</span>, </span>
<span>            shape  <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">groupingfactor</span><span class="op">)</span>, </span>
<span>            colour <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">groupingfactor</span><span class="op">)</span> <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">.95</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span> width <span class="op">=</span> <span class="fl">.6</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span><span class="fl">.95</span><span class="op">)</span>, </span>
<span>              mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">center</span> <span class="op">+</span> <span class="va">lowerwidth</span>, ymax <span class="op">=</span> <span class="va">center</span> <span class="op">+</span> <span class="va">upperwidth</span><span class="op">)</span> </span>
<span>    <span class="op">)</span><span class="op">+</span> </span>
<span>    <span class="co"># this part bears on the rawdata only with variable "DV"</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">rawdata</span>, </span>
<span>              position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html" class="external-link">position_jitter</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span>,</span>
<span>              family   <span class="op">=</span> <span class="st">"EmojiOne"</span>,</span>
<span>              label    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/emojifont/man/emoji.html" class="external-link">emoji</a></span><span class="op">(</span><span class="st">"smile"</span><span class="op">)</span>, </span>
<span>              size     <span class="op">=</span> <span class="fl">6</span>, </span>
<span>              mapping  <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">xfactor</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">DV</span>, group <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">groupingfactor</span><span class="op">)</span> <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span> <span class="va">addfactors</span> <span class="op">)</span></span>
<span>        </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We check that it is a <code>superbPlot</code>-compatible
function:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">superb</span><span class="fu">:::</span><span class="fu">is.superbPlot.function</span><span class="op">(</span><span class="st">"superbPlot.smiley"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>It is all we need! This layout can be inserted in a
<code>superbPlot</code> call:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/superb.html">superb</a></span><span class="op">(</span></span>
<span>    <span class="fu">crange</span><span class="op">(</span><span class="va">T1</span>,<span class="va">T7</span><span class="op">)</span> <span class="op">~</span> <span class="va">Condition</span>,</span>
<span>    <span class="va">TMB1964r</span>,</span>
<span>    WSFactors <span class="op">=</span> <span class="st">"T(7)"</span>,      </span>
<span>    plotStyle <span class="op">=</span> <span class="st">"smiley"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="Vignette5_files/figure-html/unnamed-chunk-23-1.png" alt="**Figure 5**. smile!" width="384"><p class="caption">
<strong>Figure 5</strong>. smile!
</p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-pw21" class="csl-entry">
Allen, M., Poggiali, D., Whitaker, K., Marshall, T. R., Langen, J. van,
&amp; Kievit, R. A. (2021). Raincloud plots: A multi-platform tool for
robust data visualization [version 2; peer review: 2 approved].
<em>Wellcome Open Reseach</em>, <em>4</em>, 1–15. <a href="https://doi.org/10.12688/wellcomeopenres.15191.2" class="external-link">https://doi.org/10.12688/wellcomeopenres.15191.2</a>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Denis Cousineau.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
